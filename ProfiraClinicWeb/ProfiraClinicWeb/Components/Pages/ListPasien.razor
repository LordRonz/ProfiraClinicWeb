@page "/list-pasien"
@using System.Net.Http.Json
@using ProfiraClinicWeb.Models
@using ProfiraClinicWeb.Utils;
@inject HttpClient httpClient

@using PatientModel = ProfiraClinicWeb.Models.Patient

<MudText Typo="Typo.h4" Style="padding: 20px 0px;">Profile Pasien</MudText>
<MudCard>
    @* <MudButton Class="m-4">Add</MudButton> *@

    <ProfiraClinicWeb.Components.Table.Table Config="PatientTableConfig" />
</MudCard>

@code {
    private bool _hidePosition;
    private bool _loading;
    private IEnumerable<Element> Elements = new List<Element>();
    private string infoFormat = "Showing {first_item} to {last_item} of {all_items}";

    private IEnumerable<PatientModel> Patients = new List<PatientModel>();

    public TableConfig PatientTableConfig { get; set; } = new TableConfig(new List<TableColumn>(), new List<object>());

    protected override async Task OnInitializedAsync()
    {
        Elements = new List<Element>()
        {
            new Element("Tess", 69, "waduh", 102),
            new Element("Tesss", 691, "waduhos", 101),
            new Element("Tessss", 694, "waduh", 103),
        };

        Patients = new List<PatientModel>()
        {
            new PatientModel("Profira Manyar", new DateTime(), "TR01", "White Glow Facial", 1, "dr novita"),
            new PatientModel("Profira Central", new DateTime(), "TR02", "White Glow Facial", 1, "dr aleg")
        };

        var patients = new List<object>()
        {
            (object) new { view="/pasien", edit="/pasien/1", memberId = "MEM00102", namaPasien = "Ninik", alamat="Darmahusada Regency 12",  noHp="081232332020", tglLahir = DateTime.Now },
            (object) new { view="/pasien", edit="/pasien/2", memberId = "MEM00103", namaPasien = "Fenny", alamat="Ploso Baru 22",  noHp="087171728282", tglLahir = DateTime.Now },
            (object) new { view="/pasien", edit="/pasien/3", memberId = "MEM00105", namaPasien = "Sandra", alamat="Kartini 10",  noHp="082128288822", tglLahir = DateTime.Now },
            (object) new { view="/pasien", edit="/pasien/4", memberId = "MEM00106", namaPasien = "Renata", alamat="Ngagel Wasana V/5",  noHp="085122838449", tglLahir = DateTime.Now },
            (object) new { view="/pasien", edit="/pasien/5", memberId = "MEM00107", namaPasien = "Irene", alamat="Manyar Jaya 7/8",  noHp="081399495959", tglLahir = DateTime.Now },
        };

        PatientTableConfig = new TableConfig(new List<TableColumn> {
                new TableColumn { Caption="View", DataField="view", Type=ColumnType.View },
                new TableColumn { Caption="Edit", DataField="edit", Type=ColumnType.Edit },
                new TableColumn { Caption="Member ID", DataField="memberId" },
                new TableColumn { Caption="Nama Pasien", DataField="namaPasien" },
                new TableColumn { Caption="Alamat", DataField="alamat" },
                new TableColumn { Caption="No. HP", DataField="noHp" },
                new TableColumn { Caption="Tgl Lahir", DataField="tglLahir" },
        }, patients);
    }

    private int ChartIndex = -1; //default value cannot be 0 -> first selectedindex is 0.

    public List<ChartSeries> Series = new List<ChartSeries>()
    {
        new ChartSeries() { Name = "Sales", Data = new double[] { 4500, 5300, 6250, 7800, 9800, 15000 } },
    };
    public string[] XAxisLabels = { "January", "February", "March", "April", "May", "June" };

}
