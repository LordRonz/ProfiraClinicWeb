@page "/treatment"
@using System.Net.Http.Json
@using ProfiraClinicWeb.Models
@using ProfiraClinicWeb.Utils;
@inject HttpClient httpClient

@using PatientModel = ProfiraClinicWeb.Models.Patient

<MudText Typo="Typo.h4" Style="padding: 20px 0px;">Perawatan</MudText>
<MudCard>
    @* <MudButton Class="m-4">Add</MudButton> *@

    <ProfiraClinicWeb.Components.Table.Table Config="TreatmentTableConfig" />
</MudCard>

@code {
    private bool _hidePosition;
    private bool _loading;
    private IEnumerable<Element> Elements = new List<Element>();
    private string infoFormat = "Showing {first_item} to {last_item} of {all_items}";

    public TableConfig TreatmentTableConfig { get; set; } = new TableConfig(new List<TableColumn>(), new List<object>());

    protected override async Task OnInitializedAsync()
    {
        var patients = new List<object>()
        {
            (object) new { edit="/pasien/1", kode = "PKT1", namaPaket = "Collagen Ampul", harga="750.000",  discMember="15%", discNonMember = "10%", group="Medis" },
            (object) new { edit="/pasien/2", kode = "PKT2", namaPaket = "Derma Aktif Rejuve", harga="5.000.000",  discMember="5%", discNonMember = "0%", group="Medis" },
            (object) new { edit="/pasien/3", kode = "PKT3", namaPaket = "Ozon Ultra Facial", harga="375.000",  discMember="10%", discNonMember = "5%", group="Non Medis" },
        };

        TreatmentTableConfig = new TableConfig(new List<TableColumn> {
                new TableColumn { Caption="Edit", DataField="edit", Type=ColumnType.Edit },
                new TableColumn { Caption="Kode", DataField="kode" },
                new TableColumn { Caption="Nama Paket", DataField="namaPaket" },
                new TableColumn { Caption="Harga", DataField="harga" },
                new TableColumn { Caption="Disc Member", DataField="discMember" },
                new TableColumn { Caption="Disc Non Member", DataField="discNonMember" },
                new TableColumn { Caption="Group", DataField="group" },
        }, patients);
    }

}
